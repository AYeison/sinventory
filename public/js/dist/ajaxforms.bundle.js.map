{"version":3,"file":"ajaxforms.bundle.js","mappings":"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","sources":["webpack://sinventory-fityfour/./public/js/src/ajaxforms.js","webpack://sinventory-fityfour/./public/js/src/categoria/events.js"],"sourcesContent":["import cat_events from './categoria/events.js';\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n\r\n    const c_events = cat_events();\r\n        \r\n    // Define actions for different form submission\r\n    function new_category(data, params= null) {\r\n       \r\n        const cat_message = document.getElementById('cat_message');\r\n        const html = data.html;\r\n       \r\n        cat_message.innerHTML = html;\r\n        cat_message.dataset.type =  data.action;\r\n\r\n        c_events.dissable_button(data.action);\r\n    }\r\n\r\n    function save_category(data, params= null) {\r\n            const {last_category} = data;\r\n            const {form : form = null } = params;\r\n            const cat_notice = document.getElementById('error-notification');\r\n            const categories_list = document.getElementById('categories-list');\r\n            const new_category = document.createElement('div');\r\n            cat_notice.innerHTML = data.message;\r\n            cat_notice.style.display = 'block';\r\n\r\n            new_category.id = last_category.categoria_id;\r\n            new_category.className = 'column is-one-quarter';\r\n            new_category.style.position = 'relative';\r\n            new_category.innerHTML = `\r\n                <div class=\"card\">\r\n                    <div class=\"card-content\">\r\n                        <p class=\"title is-5\">${last_category.categoria_name}</p>\r\n                        <p class=\"subtitle is-6\">${last_category.categoria_description}</p>\r\n                    </div>\r\n                </div>\r\n            `;\r\n            categories_list.appendChild(new_category);\r\n            if(form){\r\n                form.reset();\r\n            }\r\n      \r\n    }\r\n\r\n    function register(data, params= null) {\r\n        // Handle the register action\r\n       window.location.href = 'success?message=' + data.message;\r\n    }\r\n\r\n\r\n    function login(data, params= null) {\r\n            // Handle the login action\r\n            window.location.href = 'home';\r\n        }\r\n\r\n\r\n    function logout(data, params= null) {\r\n            // Handle the login action\r\n             window.location.href = 'login?message=' + data.message;\r\n        }\r\n    // Handle unrecognized actions\r\n    function none (data, params){\r\n            throw new Error('Action not recognized: ' + data.action);\r\n        }\r\n\r\n    const actions = {new_category,save_category,register,login,logout,none}\r\n    this.addEventListener('submit', function(e){\r\n        if(e.target.matches('.ajaxform')) {\r\n                e.preventDefault(); \r\n                const form = e.target;\r\n                const formData = new FormData(form);\r\n                const formAction = form.getAttribute('action');\r\n                const formMethod = form.getAttribute('method').toUpperCase();\r\n                \r\n                const header = new Headers();\r\n                const config = {\r\n                    method: formMethod,\r\n                    headers: header,\r\n                    mode : 'cors',\r\n                    cache: 'no-cache',\r\n                    body: formData\r\n                }\r\n                fetch(formAction, config)\r\n                .then(response => {\r\n                    if (!response.ok) {\r\n                        throw new Error('Network response was not ok ' + response.statusText);\r\n                    }\r\n                  \r\n                    return response.text();\r\n                  \r\n                })\r\n                .then(text => {\r\n                        try{\r\n                    const data = JSON.parse(text);\r\n                    console.log(data);\r\n                    if(data.status === 'success') actions[data.action](data, {form});\r\n                    else if(data.status === 'error') {\r\n                        // Handle error, e.g., show an error message\r\n                        const errorNotification = document.getElementById('error-notification');\r\n                        const bodydata = data.hasOwnProperty('row') ? data.row : '';\r\n                        errorNotification.innerHTML = data.message + '<br>'  + bodydata;\r\n                        errorNotification.style.display = 'block';\r\n                    }\r\n                        }catch(e){\r\n                            console.error('Error parsing response:', e);\r\n                             throw new Error('Invalid JSON response: ' + text);\r\n                        }\r\n                })\r\n                .catch(error => {\r\n                 \r\n                    console.error('Error:', error)\r\n    \r\n                });\r\n\r\n                }\r\n        });\r\n \r\n\r\n\r\n // Toggle password visibility\r\n   const passwordInput = document.getElementById('password-input');\r\n    const togglePassword = document.getElementById('toggle-password');\r\n   \r\n\r\n    if(togglePassword && passwordInput) {\r\n         const icon = togglePassword.querySelector('i');\r\n        togglePassword.addEventListener('click', function(e) {\r\n               \r\n                if (passwordInput.type === 'password') {\r\n                    passwordInput.type = 'text';\r\n                    icon.classList.remove('fa-eye');\r\n                    icon.classList.add('fa-eye-slash');\r\n                } else {\r\n                    passwordInput.type = 'password';\r\n                    icon.classList.remove('fa-eye-slash');\r\n                    icon.classList.add('fa-eye');\r\n                }\r\n            });\r\n\r\n    }\r\n\r\n   \r\n\r\n     \r\n        document.addEventListener('click', (e) =>  {\r\n            if(e.target.matches('#cat_cancel')){\r\n             c_events.return_button();\r\n            }\r\n        });\r\n    \r\n});","export default function cat_events(){\r\n\r\nreturn {\r\n        transform_input_slug : function (input){\r\n                const form = input.closest('#category_new');\r\n\r\n            if(!form){\r\n                return false;\r\n            }\r\n         \r\n            const input_slug = form.querySelector('#slug');\r\n            const preview = document.querySelector('.preview-slug');\r\n            if(preview && input_slug){\r\n     \r\n             const slug = input.value.trim().toLowerCase().replace(/\\s+/g, '-');\r\n             preview.textContent = slug;\r\n            input_slug.value = preview.textContent;\r\n            }\r\n\r\n          \r\n            },\r\n       card_down_toggle : function (target){\r\n            let card = target.closest('.card');\r\n            if(card){\r\n                let content = card.querySelector('.card-content');\r\n                if(content){\r\n                    // Add smooth transition for max-height\r\n                    content.style.transition = 'max-height 0.3s ease';\r\n                    content.style.overflow = 'hidden';\r\n\r\n                    // Fade effect for the text inside card-content\r\n                    let text = content.querySelector('.card-text');\r\n                    if (text) {\r\n                        text.style.transition = 'opacity 0.3s ease';\r\n                    }\r\n\r\n                    if (content.classList.contains('hidden')) {\r\n                        content.classList.remove('hidden');\r\n                        // Set maxHeight to 0 first to trigger transition\r\n                        content.style.maxHeight = '0px';\r\n                        // Force reflow to apply the initial state\r\n                        void content.offsetWidth;\r\n                        // Then set to scrollHeight to expand\r\n                        content.style.maxHeight = content.scrollHeight + 'px';\r\n\r\n                        // Fade in text\r\n                        if (text) {\r\n                            text.style.opacity = '0';\r\n                            // Force reflow\r\n                            void text.offsetWidth;\r\n                            text.style.opacity = '1';\r\n                        }\r\n\r\n                        // Optionally, remove maxHeight after transition for flexibility\r\n                        content.addEventListener('transitionend', function handler() {\r\n                            content.style.maxHeight = '';\r\n                            content.removeEventListener('transitionend', handler);\r\n                        });\r\n                    } else {\r\n                        // Set maxHeight to current height before collapsing\r\n                        content.style.maxHeight = content.scrollHeight + 'px';\r\n                        // Force reflow\r\n                        void content.offsetWidth;\r\n                        // Collapse\r\n                        content.style.maxHeight = '0px';\r\n\r\n                        // Fade out text\r\n                        if (text) {\r\n                            text.style.opacity = '1';\r\n                            // Force reflow\r\n                            void text.offsetWidth;\r\n                            text.style.opacity = '0';\r\n                        }\r\n\r\n                        content.addEventListener('transitionend', function handler() {\r\n                            content.classList.add('hidden');\r\n                            content.removeEventListener('transitionend', handler);\r\n                        });\r\n                    }\r\n                    content.classList.toggle('active');\r\n                }\r\n                }\r\n           \r\n        },\r\n    dissable_button : function(type){\r\n            const button = document.querySelector(`button[type=\"submit\"][data-type=\"${type}\"]`);\r\n            if(button){\r\n                button.disabled = true;\r\n                button.classList.add('is-loading');\r\n                setTimeout(() => {\r\n                    button.classList.remove('is-loading');\r\n                }, 2000); // Re-enable after 2 seconds\r\n            }\r\n    },\r\n\r\n    return_button : function(){\r\n            const cat_message = document.getElementById('cat_message');\r\n            const type = cat_message.dataset.type || 'waiting';\r\n            const static_msg = cat_message.dataset.stMessage || 'Esperando por una solicitud...';\r\n            const cancel_btn = document.getElementById('cat_cancel');\r\n            const type_btn = document.querySelector(`button[type=\"submit\"][data-type=\"${type}\"]`);\r\n            if(type_btn && cancel_btn){\r\n               \r\n                type_btn.disabled = false;\r\n                type_btn.classList.remove('is-loading');\r\n                cat_message.innerHTML = static_msg;\r\n            }\r\n    },\r\n\r\n    delete_categories : function(){\r\n        const btn_delete = document.getElementById('delete-category');\r\n\r\n            btn_delete.addEventListener('click', function(e){\r\n                e.preventDefault();\r\n                let mode = this.dataset.mode;\r\n                const categories_list = document.getElementById('categories-list');\r\n                if(categories_list && categories_list.firstChild){\r\n                    const col_cats = categories_list.querySelectorAll('.column');\r\n\r\n                    if(col_cats){\r\n                        col_cats.forEach(function(cat){\r\n                            if( mode === 'active-dlt'){\r\n                             const form = document.createElement('form');\r\n                              const input_delete= document.createElement('button');\r\n                              const hidden_id = document.createElement('input');\r\n                              const cat_id = cat.id.replace(/^category-/, \"\");\r\n                              const action_input = document.createElement('input');\r\n                              \r\n                              input_delete.type = 'submit';\r\n                              input_delete.innerHTML = '<span>Delete</span>';\r\n                              input_delete.innerHTML += '<span class=\"icon is-small\">';\r\n                              input_delete.innerHTML += '<i class=\"fas fa-times\"></i>';\r\n                              input_delete.innerHTML += '</span>';\r\n                              input_delete.className = 'delete-button button is-danger is-outlined';\r\n\r\n                              hidden_id.type = 'hidden';\r\n                              hidden_id.value = cat_id;\r\n                              hidden_id.name = 'category_id';\r\n\r\n                              action_input.type='hidden';\r\n                              action_input.value ='delete_category';\r\n                              action_input.name = 'action';\r\n\r\n                              form.appendChild(input_delete);\r\n                              form.appendChild(hidden_id);\r\n                              form.appendChild(action_input);\r\n\r\n                              form.action = './php/category.php';\r\n                              form.method = 'POST';\r\n                              form.className = 'form-btn-dlt ajaxform';\r\n\r\n                              form.style.position = 'absolute';\r\n                              form.style.top = '-0.5em';\r\n                              form.style.right = '-0.5em';\r\n\r\n                              cat.appendChild(form);\r\n                             btn_delete.dataset.mode = 'deactive-dlt';\r\n                             btn_delete.textContent = 'Cancelar';\r\n                              \r\n                            }else if(mode === 'deactive-dlt'){\r\n                                const dlt_btn = cat.querySelector('.form-btn-dlt');\r\n                                if(dlt_btn){\r\n                                      dlt_btn.remove();\r\n                                        btn_delete.dataset.mode = 'active-dlt';\r\n                                       btn_delete.textContent = 'Delete';\r\n                                }\r\n                            }\r\n                        \r\n                            \r\n                           \r\n                          \r\n                        })\r\n                    }\r\n                }\r\n                  \r\n            })\r\n    }\r\n        \r\n}\r\n\r\n\r\n}"],"names":["document","addEventListener","c_events","transform_input_slug","input","form","closest","input_slug","querySelector","preview","slug","value","trim","toLowerCase","replace","textContent","card_down_toggle","target","card","content","style","transition","overflow","text","classList","contains","remove","maxHeight","offsetWidth","scrollHeight","opacity","handler","removeEventListener","add","toggle","dissable_button","type","button","disabled","setTimeout","return_button","cat_message","getElementById","dataset","static_msg","stMessage","cancel_btn","type_btn","innerHTML","delete_categories","btn_delete","e","preventDefault","mode","this","categories_list","firstChild","col_cats","querySelectorAll","forEach","cat","createElement","input_delete","hidden_id","cat_id","id","action_input","className","name","appendChild","action","method","position","top","right","dlt_btn","actions","new_category","data","html","save_category","params","arguments","length","undefined","last_category","cat_notice","message","display","categoria_id","categoria_name","categoria_description","reset","register","window","location","href","login","logout","none","Error","matches","formData","FormData","formAction","getAttribute","formMethod","toUpperCase","header","Headers","fetch","headers","cache","body","then","response","ok","statusText","JSON","parse","console","log","status","errorNotification","bodydata","hasOwnProperty","row","error","catch","passwordInput","togglePassword","icon"],"sourceRoot":""}